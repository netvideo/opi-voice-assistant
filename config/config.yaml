# Orange Pi 5 Plus 语音助手配置文件
# 支持本地模型 + 国内主流云端API混合模式
# 最后更新: 2026-02-23

# ===========================================
# 模型路径 (本地模型)
# ===========================================
models:
  asr: models/asr/Qwen3-ASR-0.6B
  # LLM模型选择 (根据内存选择):
  #   - Qwen3-0.6B:  ~700MB, 适合4GB内存, 速度快 (15-20 t/s)
  #   - Qwen3-1.7B:  ~1.8GB, 适合8GB内存, 能力强 (8-12 t/s) [推荐]
  #   - DeepSeek-R1-Distill-Qwen-1.5B: ~1GB, 无function calling
  llm: models/llm/Qwen3-0.6B-rk3588-w8a8.rkllm
  tts: models/tts/Qwen3-TTS-0.6B

# 运行设备 (cpu/cuda)
# RK3588上CPU表示在CPU上运行，NPU通过RKLLM自动调用
device: cpu

# ===========================================
# 云端API配置 (可选)
# 支持国内主流AI服务商 - 2026年最新模型
# ===========================================
cloud_api:
  # 是否启用云端API
  enabled: false
  
  # 服务商选择 (必填)
  # === 国内主流 (推荐) ===
  # dashscope    - 阿里云灵积 - 通义千问 (Qwen3/3.5系列)
  # qianfan      - 百度千帆 - 文心一言 (ERNIE 5.0/X1.1/4.5系列)
  # hunyuan      - 腾讯混元 (2.0/T1/A13B系列)
  # doubao       - 字节豆包 - 火山引擎 (1.8/Pro/Lite系列)
  # zhipu        - 智谱AI - ChatGLM (GLM-4/4.5/4.6系列)
  # moonshot     - 月之暗面 - Kimi (v1系列)
  # minimax      - MiniMax (abab6.5系列)
  # yi           - 零一万物 (Lightning/Large系列)
  # spark        - 讯飞星火 (Lite/4.0Ultra)
  # === 其他 ===
  # deepseek     - DeepSeek (V3.2/R1系列)
  # siliconflow  - 硅基流动 (100+开源模型)
  # openai       - OpenAI (GPT系列)
  # custom       - 自定义API
  provider: dashscope
  
  # API密钥
  # 可通过环境变量设置，支持的变量名：
  #   DASHSCOPE_API_KEY, QIANFAN_API_KEY, HUNYUAN_API_KEY, 
  #   DOUBAO_API_KEY, ZHIPU_API_KEY, MOONSHOT_API_KEY,
  #   MINIMAX_API_KEY, YI_API_KEY, SPARK_API_KEY,
  #   DEEPSEEK_API_KEY, SILICONFLOW_API_KEY, OPENAI_API_KEY
  api_key: ""
  
  # 部分平台需要额外的密钥 (如百度千帆需要secret_key)
  # secret_key: ""
  
  # 部分平台需要App ID (如科大讯飞)
  # app_id: ""
  
  # 模型名称 (可选，不设置则使用默认值)
  # ===== 2026年2月最新推荐模型 =====
  # 
  # dashscope (阿里云) - Qwen3.5系列 (2026.02.16发布):
  #   - qwen3.5-plus                    # 最新旗舰，原生多模态，性能超GPT-5.2
  #   - qwen3.5-max                     # 最强版本
  #   - qwen-max / qwen-max-latest      # Qwen3旗舰版
  #   - qwen-plus / qwen-plus-latest    # 均衡推荐版
  #   - qwen-turbo                      # 极速高性价比
  #   - qwen-long                       # 100万token长文本
  #
  # qianfan (百度千帆) - ERNIE 5.0系列:
  #   - ernie-5.0-thinking-preview      # ERNIE 5.0旗舰
  #   - ernie-5.0-thinking-latest       # 5.0最新版
  #   - ernie-x1.1                      # X1.1增强版
  #   - ernie-4.5-turbo-128k            # 4.5长文本版
  #
  # hunyuan (腾讯混元):
  #   - hunyuan-2.0-thinking            # 2.0思考版(旗舰)
  #   - hunyuan-2.0-instruct            # 2.0指令版(推荐)
  #   - hunyuan-t1-latest               # T1推理模型
  #
  # zhipu (智谱AI) - GLM-5系列:
  #   - glm-5                           # 最新开源之王，编程/推理极强
  #   - glm-4.7-flash                   # 4.7极速版
  #   - glm-4.7                         # GLM-4.7旗舰
  #   - glm-4-plus                      # Plus旗舰版
  #   - glm-4-air                       # Air均衡版(推荐)
  #   - glm-4-flash                     # Flash免费版
  #
  # moonshot (月之暗面/Kimi) - K2.5系列:
  #   - kimi-k2.5                       # 最新版，推理能力强
  #   - kimi-k2.5-thinking              # 思考版
  #   - moonshot-v1-32k                 # 32K上下文
  #   - moonshot-v1-128k                # 128K长文本
  #
  # deepseek - V3.2系列:
  #   - deepseek-chat                   # V3.2通用对话(128K)
  #   - deepseek-reasoner               # R1推理模型(思维链)
  #   - deepseek-v3.2                   # V3.2最新
  #
  # siliconflow (硅基流动) - 100+开源模型:
  #   - Qwen/Qwen3-235B-A22B            # Qwen3 MoE旗舰
  #   - Qwen/Qwen3-30B-A3B              # Qwen3 MoE轻量
  #   - deepseek-ai/DeepSeek-V3.2       # DeepSeek V3.2
  #   - deepseek-ai/DeepSeek-R1         # DeepSeek R1
  #   - THUDM/glm-4-9b-chat             # GLM-4 9B(免费)
  #   - zai-org/GLM-4.7                 # GLM-4.7
  #
  # minimax - M2.5系列 (2026.02.12发布):
  #   - MiniMax-M2.5                      # 最新旗舰，SWE-Bench 80.2%，Agent能力强
  #   - MiniMax-M2.5-Lightning            # 极速版，100 TPS
  #   - abab6.5s-chat                     # 上一代模型
  #
  model: ""
  
  # 自定义API基础URL (仅用于custom provider)
  # 例如: https://api.your-domain.com/v1
  base_url: ""
  
  # 优先使用云端API (当网络可用时)
  prefer_cloud: true
  
  # 自动回退到本地模型 (当云端API失败时)
  auto_fallback: true
  
  # API参数
  temperature: 0.7
  max_tokens: 512

# ===========================================
# 音频配置
# ===========================================
audio:
  sample_rate: 16000
  channels: 1
  chunk_size: 480              # 30ms at 16kHz
  vad_aggressiveness: 2         # VAD敏感度 (0-3, 越高越严格)
  input_device: null            # 输入设备ID (null=自动)
  output_device: null           # 输出设备ID (null=自动)
  max_silence_frames: 15        # 静音帧数阈值 (停止录音)
  min_speech_frames: 3          # 语音帧数阈值 (开始录音)

# ===========================================
# 唤醒词配置 (全双工模式)
# ===========================================
wake_word: "小助手"

# ===========================================
# 本地LLM配置
# ===========================================
llm:
  max_context_len: 4096
  temperature: 0.7
  max_new_tokens: 512
  top_p: 0.9
  repeat_penalty: 1.1
  
  # Function Calling / Tool Calling 配置
  # Qwen3 系列支持工具调用功能
  function_calling:
    enabled: true
    # 内置工具: set_volume (音量调节)
    # 可扩展添加更多工具
    tools: []

# ===========================================
# 内置工具 (自动加载)
# ===========================================
# - set_volume: 音量调节 (调大/调小/静音/取消静音)
#
# 语音指令示例:
#   "把音量调大一点" → 调高音量
#   "静音" → 静音
#   "音量调到50%" → 设置音量
#   "取消静音" → 取消静音

# ===========================================
# 对话配置
# ===========================================
max_history: 10

system_prompt: |
  你是一个helpful的中文语音助手，运行在 Orange Pi 5 Plus 上。
  请用简洁友好的中文回答问题。
  
  你可以使用工具来帮助用户:
  - 调节音量: 使用 set_volume 工具
  - 当用户说"把音量调大"、"静音"、"音量调到XX"时，调用相应工具
  
  回复时要简洁，适合语音播报。

# ===========================================
# TTS配置
# ===========================================
tts:
  default_speaker: 0
  speed: 1.0
  cache_dir: cache

# ===========================================
# 调试配置
# ===========================================
debug:
  save_intermediate: false
  debug_dir: debug
